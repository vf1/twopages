(this.webpackJsonptwopages=this.webpackJsonptwopages||[]).push([[0],{33:function(e,t,a){},34:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(16),o=a.n(n),l=(a(33),a(34),a(11)),s=a(4),i=a(12),u=a(2),d=a(1);function b(e){var t=e.name,a=e.price,r=e.image,c=e.count,n=e.removeFromCart,o=e.setCartItemCount;return Object(d.jsxs)("div",{className:"flex items-center gap-4 bg-white rounded shadow p-4 mb-4",children:[Object(d.jsx)("div",{className:"w-12 h-12",children:Object(d.jsx)("img",{src:r,alt:""})}),Object(d.jsx)("div",{className:"flex-grow font-semibold text-xl",children:t}),Object(d.jsxs)("div",{className:"text-gray-500 text-sm",children:["$",a]}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{value:c,onChange:function(e){o(t,e.target.value)},type:"number",className:"w-12 border-2 text-sm focus:outline-none"})}),Object(d.jsxs)("div",{className:"text-xs text-gray-400 w-20",children:["$",(a*c).toFixed(2)]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:function(){return n(t)},className:"w-8 h-8 focus:outline-none focus:ring-2",children:"x"})})]})}var j="ADD_PRODUCT",v="REMOVE_PRODUCT",p="REMOVE_ALL_PRODUCTS",O="SET_PRODUCT_COUNT";var f=Object(i.b)((function(e){return{products:e.cart.value,totalCount:e.cart.totalCount,totalPrice:e.cart.totalPrice}}),(function(e){return{removeFromCart:function(t){return e({type:v,payload:{name:t}})},clearCart:function(){return e({type:p,payload:{name:t}});var t},setCartItemCount:function(t,a){return e(function(e,t){return{type:O,payload:{name:e,count:parseInt(t)}}}(t,a))}}}))((function(e){var t=e.products,a=e.totalPrice,r=e.removeFromCart,c=e.setCartItemCount,n=e.clearCart;return Object(d.jsxs)("div",{className:"container pl-4 pr-4 mx-auto w-full lg:w-1/2",children:[Object(d.jsx)("div",{className:"pb-4 pt-4",children:Object(d.jsx)(l.b,{to:"/",className:"text-blue-600 font-bold hover:underline",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})}),Object(d.jsx)("div",{children:t.map((function(e){return Object(d.jsx)(b,Object(u.a)({removeFromCart:r,setCartItemCount:c},e),e.name)}))}),Object(d.jsxs)("div",{className:"mb-4",children:[Object(d.jsx)("button",{onClick:function(){return n()},className:"py-1 px-2 font-semibold rounded bg-gray-400\r hover:bg-red-400 text-white",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),Object(d.jsxs)("div",{className:"text-xl float-right",children:["$",a]})]})]})}));function h(e){var t=e.name,a=e.price,r=e.image,c=e.addToCart;return Object(d.jsxs)("div",{className:"flex gap-4 justify-start rounded shadow p-4 bg-white",children:[Object(d.jsx)("img",{src:r,alt:"",className:"h-32 object-scale-down"}),Object(d.jsxs)("div",{className:"relative flex-grow",children:[Object(d.jsx)("div",{className:"font-bold text-2xl",children:t}),Object(d.jsxs)("div",{className:"text-gray-500 font-semibold pl-4",children:["$",a]}),Object(d.jsx)("button",{onClick:function(){return c(t)},className:"py-1 px-2 font-semibold rounded bg-green-400\r hover:bg-green-300 text-white absolute bottom-0 right-0",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var a,r,c=function(e,t){if(null==e)return{};var a,r,c={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var g=r.createElement("path",{fill:"currentColor",d:"M576 216v16c0 13.255-10.745 24-24 24h-8l-26.113 182.788C514.509 462.435 494.257 480 470.37 480H105.63c-23.887 0-44.139-17.565-47.518-41.212L32 256h-8c-13.255 0-24-10.745-24-24v-16c0-13.255 10.745-24 24-24h67.341l106.78-146.821c10.395-14.292 30.407-17.453 44.701-7.058 14.293 10.395 17.453 30.408 7.058 44.701L170.477 192h235.046L326.12 82.821c-10.395-14.292-7.234-34.306 7.059-44.701 14.291-10.395 34.306-7.235 44.701 7.058L484.659 192H552c13.255 0 24 10.745 24 24zM312 392V280c0-13.255-10.745-24-24-24s-24 10.745-24 24v112c0 13.255 10.745 24 24 24s24-10.745 24-24zm112 0V280c0-13.255-10.745-24-24-24s-24 10.745-24 24v112c0 13.255 10.745 24 24 24s24-10.745 24-24zm-224 0V280c0-13.255-10.745-24-24-24s-24 10.745-24 24v112c0 13.255 10.745 24 24 24s24-10.745 24-24z"});function y(e,t){var a=e.title,c=e.titleId,n=x(e,["title","titleId"]);return r.createElement("svg",m({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"shopping-basket",className:"svg-inline--fa fa-shopping-basket fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",ref:t,"aria-labelledby":c},n),a?r.createElement("title",{id:c},a):null,g)}var w=r.forwardRef(y);a.p;function C(e){var t=e.count;return Object(d.jsx)(l.b,{to:"/cart",children:Object(d.jsx)("div",{className:"relative p-2 m-6",children:Object(d.jsxs)("div",{className:"box-border rounded-xl m-0 h-16 w-16 p-4 border-4 text-gray-500 \r border-gray-500 hover:text-blue-400 hover:border-blue-400",children:[Object(d.jsx)(w,{}),t>0?Object(d.jsx)("div",{className:"absolute top-0 right-0 bg-red-400 text-white\r font-semibold rounded-full text-center pl-2 pr-2",children:t}):Object(d.jsx)(d.Fragment,{})]})})})}var N=Object(i.b)((function(e){return{isFetching:e.products.isFetching,error:e.products.error,products:e.products.value,cartCount:e.cart.totalCount}}),(function(e){return{addToCart:function(t){return e((a=t,function(e,t){var r=t().products.value.find((function(e){return e.name===a}));r&&e({type:j,payload:{product:r,count:1}})}));var a}}}))((function(e){var t=e.isFetching,a=(e.error,e.products),r=e.cartCount,c=e.addToCart;return t?Object(d.jsx)(d.Fragment,{children:"Loading..."}):Object(d.jsxs)("div",{className:"container mx-auto",children:[Object(d.jsx)("div",{className:"grid justify-end",children:Object(d.jsx)(C,{count:r})}),Object(d.jsx)("div",{className:"flex flex-row flex-wrap",children:a.map((function(e){return Object(d.jsx)("div",{className:"p-2 w-full md:w-1/2 lg:w-1/3 xl:w-1/4",children:Object(d.jsx)(h,Object(u.a)({addToCart:c},e))},e.name)}))})]})}));var T=function(){return Object(d.jsx)(l.a,{children:Object(d.jsxs)(s.c,{children:[Object(d.jsx)(s.a,{path:"/cart",children:Object(d.jsx)(f,{})}),Object(d.jsx)(s.a,{path:"/",children:Object(d.jsx)(N,{})})]})})},E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,42)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,o=t.getTTFB;a(e),r(e),c(e),n(e),o(e)}))},S=a(15),F=a(24),I=a.n(F),P=a(18),_=a(26),k="GET_PRODUCTS_REQUEST",R="GET_PRODUCTS_SUCCESS",D="GET_PRODUCTS_FAIL";var L={isFetching:!1,error:"",value:[]};var U,M=a(9),V={value:null!==(U=JSON.parse(localStorage.getItem("twopagescart")))&&void 0!==U?U:[],totalCount:0,totalPrice:0};function z(e,t){switch(t.type){case j:var a=e.value.findIndex((function(e){return e.name===t.payload.product.name}));return a>=0?Object(u.a)(Object(u.a)({},e),{},{value:[].concat(Object(M.a)(e.value.slice(0,a)),[Object(u.a)(Object(u.a)({},t.payload.product),{},{count:e.value[a].count+t.payload.count})],Object(M.a)(e.value.slice(a+1)))}):Object(u.a)(Object(u.a)({},e),{},{value:[].concat(Object(M.a)(e.value),[Object(u.a)(Object(u.a)({},t.payload.product),{},{count:t.payload.count})])});case v:var r=e.value.findIndex((function(e){return e.name===t.payload.name}));return r>=0?Object(u.a)(Object(u.a)({},e),{},{value:[].concat(Object(M.a)(e.value.slice(0,r)),Object(M.a)(e.value.slice(r+1)))}):e;case p:return Object(u.a)(Object(u.a)({},e),{},{value:[]});case O:var c=e.value.findIndex((function(e){return e.name===t.payload.name}));return c>=0?Object(u.a)(Object(u.a)({},e),{},{value:[].concat(Object(M.a)(e.value.slice(0,c)),[Object(u.a)(Object(u.a)({},e.value[c]),{},{count:t.payload.count>0?t.payload.count:1})],Object(M.a)(e.value.slice(c+1)))}):e;default:return e}}var A="SET_DEALERS";var G={value:[]};var J=Object(S.b)({dealers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(u.a)(Object(u.a)({},G),{},{value:t.payload.dealers});default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(u.a)(Object(u.a)({},L),{},{isFetching:!0});case R:return Object(u.a)(Object(u.a)({},L),{},{value:t.payload.products});case D:return Object(u.a)(Object(u.a)({},L),{},{error:t.payload.message});default:return e}},cart:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,a=arguments.length>1?arguments[1]:void 0,r=z(t,a),c=0,n=0,o=Object(P.a)(r.value);try{for(o.s();!(e=o.n()).done;){var l=e.value;c+=parseInt(l.count),n+=l.count*l.price}}catch(s){o.e(s)}finally{o.f()}return Object(u.a)(Object(u.a)(Object(u.a)({},t),r),{},{totalCount:c,totalPrice:n.toFixed(2)})}}),$=a(27),B=a.n($),H=a(28),Q=Object(S.c)(J,Object(S.a)(H.a,B.a));Q.subscribe((function(){localStorage.setItem("twopagescart",JSON.stringify(Q.getState().cart.value))})),Q.dispatch(function(e){return{type:A,payload:{dealers:e}}}([])),Q.dispatch(function(){var e=Object(_.a)(I.a.mark((function e(t,a){var r,c,n,o,l,s,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a(),t({type:k}),e.prev=2,c=r.dealers.value.length>0?"?dealers=".concat(r.dealers.value.join(",")):"",e.next=7,fetch("https://murmuring-tor-81614.herokuapp.com/api/goods/"+c,{method:"GET"});case 7:return n=e.sent,e.next=10,n.json();case 10:o=e.sent,l=Object(P.a)(o);try{for(l.s();!(s=l.n()).done;)(i=s.value).image="https://murmuring-tor-81614.herokuapp.com"+i.image}catch(u){l.e(u)}finally{l.f()}t({type:R,payload:{products:o}}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),t({type:D,payload:e.t0.message});case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t,a){return e.apply(this,arguments)}}()),o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(i.a,{store:Q,children:Object(d.jsx)(T,{})})}),document.getElementById("root")),E()}},[[41,1,2]]]);
//# sourceMappingURL=main.6222dc79.chunk.js.map